---
title: 人因工程計畫

---

# 人因工程計畫
## 計畫說明
工廠作業員姿勢辨識，目的是：

1. **從靜態照片(目前只有900張照片)中辨識工廠作業員的手臂姿勢**
2. **將手臂抬起的角度分類為多個等級，如下所示。**

![image](https://hackmd.io/_uploads/SyYHYMKVeg.png)

| 分數 | 姿勢描述             | 條件             |
| -- | ---------------- | -------------- |
| 10 | 手臂抬到與身體成 180 度   | θ ≈ 180°       |
| 7  | 手肘高於肩部，θ > 90°   | 90° < θ < 180° |
| 5  | 手肘與肩同高，θ ≈ 90°   | θ = 90°        |
| 4  | 手肘與肩同高，手臂彎曲 90 度 | θ = 90°，但手肘彎曲  |
| 2  | 手臂與身體介於 10\~90 度 | 10° ≤ θ < 90°  |
| 1  | 手臂貼近身體           | θ < 10°        |
3. **延伸至影片分析，統計每種姿勢出現的持續時間（秒）**

| 架構層級 | 會用到的工具                                           |
| ---- | ------------------------------------------------ |
| 前端   | React.js、Tailwind、Chart.js、Firebase（可選）    |
| 後端   | FastAPI   |
| 分析模組 | MediaPipe、OpenCV、NumPy、pandas、matplotlib         |
| 資料庫  | SQLite / Firebase |
| 部署   | Render / Railway、S3                   |



## 資料集
* 約 **900 張照片**，拍攝於真實工廠現場
* 每張照片中包含一位工人
* 部分影像可能有遮擋、背景複雜、角度不一等工業現場特性
## 模型訓練策略
> 因資料集900張照片，不適合使用時間序列模型（例如：RNN、LSTM、GRU、CNN-LSTM、CNN-GRU），這些模型的訓練需要連續幀的資訊，才能捕捉「時間上的變化與持續性」。
####  1. **使用 MediaPipe Pose 擷取人體 33 個關節點**

* 包括：肩膀、手肘、手腕等
* 每個關節點提供 (x, y, z) 座標與 visibility（可信度）

####  2. **計算手臂角度**
* 使用肩－肘－手腕三點形成的夾角
* 依角度分類為多種姿勢等級

####  3. **使用 CNN 或 MLP 進行姿勢分類**

考慮兩種方案：
* **MLP**：以 (x, y) 座標作為特徵向量輸入分類器
* **CNN**：將骨架繪製為紅線圖像，輸入 CNN 進行圖像分類

CNN輸入:
| 方法           | 輸入圖像說明        | 適合  |
| ------------ | ------------- | ------------------ |
| **原圖 + 骨架**  | 工廠場景保留 + 紅線骨架 | 若場景也有意義，例如需推測動作場地  |
| **純骨架圖（黑底）** | 去背景，只留下紅線結構   | ✅ 更純淨，推薦做姿勢分類任務時使用 |

## 分類準確度評估方法
- 繪製 **混淆矩陣（Confusion Matrix）** : 
    | 真實\預測  | 1  | 2  | 4  | 5  | 7  | 10 |
    | ------ | -- | -- | -- | -- | -- | -- |
    | **1**  | 80 | 15 | 3  | 0  | 0  | 0  |
    | **2**  | 9  | 70 | 10 | 6  | 3  | 0  |
    | **4**  | 1  | 5  | 50 | 18 | 5  | 0  |
    | **5**  | 0  | 2  | 14 | 60 | 10 | 0  |
    | **7**  | 0  | 1  | 3  | 8  | 72 | 6  |
    | **10** | 0  | 0  | 0  | 2  | 8  | 90 |

- 計算 **F1 Score** :

**F1 Score** 是分類模型在「**Precision（精確率）**」與「**Recall（召回率）**」之間的**平衡指標**。

公式為：

$$
F1 = 2 \times \frac{\text{Precision} \times \text{Recall}}{\text{Precision} + \text{Recall}}
$$

| 指標            | 公式             | 意義                         |
| ------------- | -------------- | -------------------------- |
| **Precision** | TP / (TP + FP) | 預測為 10 的結果中，有多少是正確的        |
| **Recall**    | TP / (TP + FN) | 所有真實為 10 的樣本中，有多少被正確預測     |
| **F1 Score**  | 調和平均           | 兼顧 Precision 與 Recall 的平衡值 |

| 項目                     | 中文說明 | 舉例（以類別「10」為例）           |
| ---------------------- | ---- | ----------------------- |
| **TP**（True Positive）  | 真陽性  | 模型預測是 10，實際也是 10        |
| **FP**（False Positive） | 假陽性  | 模型預測是 10，但實際不是 10       |
| **FN**（False Negative） | 假陰性  | 實際是 10，但模型預測成其他類別       |
| **TN**（True Negative）  | 真陰性  | 模型預測為**非 10**，且實際也不是 10 |




## 7/2 進度
 
- 能否要求工廠提供無遮擋的影片(1 min - 2 min)?
- 討論是否需要CNN、MLP助於姿勢分類
- 兩隻手角度不同時怎麼辦
- 8/29 期中報告 (7月中-8月中完成程式部分)
- 9/30 平台要完成
- 9/30 前要發表學術研討會論文一篇
- 10/31 期末報告
## 7/9 進度
![image](https://hackmd.io/_uploads/BJzD5HNSlx.png)
- 姿勢分類方法 (使用機器學習分類?直接透過mediapipe計算角度?)
- mediapipe 靜態模式的準確度評估 (混淆矩陣、F1-score)
![image](https://hackmd.io/_uploads/rycflOsSle.png)
- Q : 兩隻手角度不同時怎麼辦? An : 會在詢問廠商是取最大分數or平均值，預計會以兩手最大分數為最後結果。